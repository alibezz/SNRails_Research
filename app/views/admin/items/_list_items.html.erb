
<ul id="list_items">
  <% @items.each do |item| %>
    <li id="item_<%= item.id %>"> 
      <%= item.info%> 
      <ul>
        <li> <%= design_display_button 'edit', t(:edit), edit_admin_research_item_url(@research.id, item.id) %> </li>
       <% unless item.is_text? %>
         <% unless item.item_values.empty? %>
           <li><%= design_display_button 'item_values', t(:item_values), admin_research_item_item_values_url(item.research_id, item.id) %> </li>
         <% end %>
         <li> <%= design_display_button 'item_value', t(:add_itemvalue), new_admin_item_item_value_url(item.id) %> </li>
       <% end %>
        <li><%= link_to t(:destroy), { :action => "destroy", :id => item.id }, :confirm => t(:message_confirmation), :method => :delete %></li>
      </ul>
      <% if item.kind_of?(Question) %>
        <ul>
          <% item.item_values.map do |item_value| %>
            <li> 
              <%= item_value.info %> 
              <ul>
                <li>
                  <%= design_display_button 'edit', t(:edit), edit_admin_research_item_item_value_url(@research, item, item_value) %>
                </li>
              </ul>
            </li>
          <% end %>
        </ul>
      <% end %>
    </li>
  <% end %>
</ul>

<%= 
  sortable_element 'list_items', 
        :complete => visual_effect(:highlight, 'list_items'), 
        :url => { :action => "reorder_items", :page => params[:page]},
        :failure => "$('error').innerHTML= request.responseText",
        :constraint => false,
        :dropOnEmpty => true,
        :containment =>  ['list_items']
%>

